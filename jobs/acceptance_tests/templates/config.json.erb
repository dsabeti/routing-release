<%
  require 'json'

config = {
  addresses: p("acceptance_tests.addresses"),
  api: p("acceptance_tests.cloud_controller.api"),
  apps_domain: Array(p("acceptance_tests.cloud_controller.apps_domain")).first,
  admin_user: p("acceptance_tests.cloud_controller.admin_user"),
  admin_password: p("acceptance_tests.cloud_controller.admin_password"),
  use_http: p("acceptance_tests.cloud_controller.use_http"),
  skip_ssl_validation: p("acceptance_tests.cloud_controller.skip_ssl_validation"),
  oauth: {
    token_endpoint: "https://uaa.service.cf.internal",
    client_name: "tcp_emitter",
    skip_ssl_validation: p("skip_ssl_validation"),
    client_secret: p("tcp_emitter.oauth_secret"),
    port: p("uaa.tls_port"),
  }
}
if p("uaa.ca_cert") != ""
  config["ca_certs"] = "/var/vcap/jobs/acceptance_tests/config/certs/uaa/ca.crt"
end
%>

<%= JSON.pretty_generate(config) %>
